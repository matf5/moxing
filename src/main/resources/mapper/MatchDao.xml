<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace指定我们的到具体的bean -->
<mapper namespace="com.moxing.ssm.dao.MatchDao">

    <select id="getMatchUserInfo1" resultType="com.moxing.ssm.model.UserInfo">
        SELECT
        *
        FROM
        `userinfo`
        RIGHT OUTER JOIN `match` AS m ON (userinfo.user_id = m.second_user_id)
        WHERE
        m.first_user_id = #{userId}
    </select>

    <select id="getMatchUserInfo2" resultType="com.moxing.ssm.model.UserInfo">
        SELECT
        *
        FROM
        `userinfo`
        RIGHT OUTER JOIN `match` AS m ON (userinfo.user_id = m.first_user_id)
        WHERE
        m.second_user_id = #{userId}
    </select>

    <select id="getMessage" resultType="com.moxing.ssm.model.Message">
        SELECT
        *
        FROM
        `message`
        WHERE
        (message.send_id = #{0} AND message.rece_id = #{1}) OR (message.send_id = #{1} AND message.rece_id = #{0})
    </select>

</mapper>